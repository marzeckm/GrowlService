const styleEl=document.createElement("style");styleEl.innerHTML=".TestBench,body,html{min-height:100%;width:100%}*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;margin:0}body,html{padding:0;background-color:#141618;color:#fff}body>*{display:none}.TestBench{display:inherit}.TestBench .header{width:100%;padding:1rem;background-color:rgba(15,85,18,.5)}.TestBench .test-result.error,.TestBench.error .header{background-color:rgba(85,15,15,.5)}.TestBench .container{padding:1rem}.TestBench .test-result{padding:.25rem .5rem;margin-bottom:.25rem;border-radius:.25rem}.TestBench .test-result.success{background-color:rgba(15,85,18,.35)}.TestBench h1{margin:0 0 .5rem}.TestBench h3{margin:1rem 0 .5rem}.TestBench h3:first-of-type{margin-top:0}.TestBench .context{color:rgba(120,120,120);font-style:italic;padding:.5rem .25rem}",document.querySelector("head").appendChild(styleEl);const HtmlService=function(){return{createHtmlElement:function(e,t,n,i){let s=document.createElement(e);s.innerHTML=t;let o=i?Object.keys(i):[];for(var a=0;a<o.length;a++)s.setAttribute(o[a],i[o[a]]);n.appendChild(s)},addClass:function(e,t){e.classList.add(t)},setAttributes:function(e,t){let n=Object.keys(t);for(var i=0;i<n;i++)e.setAttribute(n[i],t[n[i]])}}},ConsoleService=function(){return{_supportsStyles:!/Trident|MSIE/.test(navigator.userAgent),success:function(e,t){t=t||!1,this._supportsStyles?console.log(["%c",e].join(""),["color: green;",t?"font-size: 1.25rem;":""].join("")):(t&&console.log(""),console.info(e))},error:function(e,t){t=t||!1,this._supportsStyles?console.log(["%c",e].join(""),["color: red;",t?"font-size: 1.25rem;":""].join("")):(t&&console.log(""),console.error(e))},comment:function(e){this._supportsStyles?console.log(["%c",e].join(""),"font-style: italic; color: grey;"):console.log(">",e)},bold:function(e){this._supportsStyles?console.log(["%c",e].join(""),"font-weight: 700;"):console.log(["\n",e].join(""))},header:function(e){this._supportsStyles?console.log(["%c",e].join(""),"font-weight: 700; font-size: 1.25em;"):console.log("\n>",e,"<\n")}}},ResultType={SUCCESS:"success",ERROR:"error"},ArrayLikeMatchers=function(e,t,n,i){return{value:e,isNot:t=t||!1,context:n=n||null,name:i=i||"",not:t?void 0:ArrayLikeMatchers(e,!0,n,i),withContext:function(n){return ArrayLikeMatchers(e,t,n,i)},toBeTruthy:function(){this._evaluateTest(!!this.value==!this.isNot,"to be truthy")},toEqual:function(e){this._evaluateTest(JSON.stringify(this.value)===JSON.stringify(e)==!this.isNot,this._toBeTextWithValue("to Equal",e))},toBeNull:function(){this._evaluateTest(null===this.value==!this.isNot,"to be null")},toBeInstanceOf:function(e){this._evaluateTest(typeof this.value===e==!this.isNot,this._toBeTextWithValue("to be instance of",e))},toBeTrue:function(){this._evaluateTest(!this.isNot===this.value,"to be true")},toBeUndefined:function(){this._evaluateTest(void 0===this.value==!this.isNot,"to be undefined")},toHaveBeenCalledTimes:function(e){TestBench().$isSpy(this.value)?(this.name=this.value.getName(),this._evaluateTest(this.value.haveBeenCalledTimes()===e==!this.isNot,this._toBeTextWithValue("to have been called times:",e))):console.error("The specified value to check is not a TestBench.Spy!")},toHaveBeenCalledOnceWith:function(){let e=Array.prototype.slice.call(arguments);TestBench().$isSpy(this.value)?(this.name=this.value.getName(),this._evaluateTest((1===this.value.haveBeenCalledTimes()&&JSON.stringify(this.value.getStoredParams())===JSON.stringify(e))==!this.isNot,"to have been called once with")):console.error("The specified value to check is not a TestBench.Spy!")},toBeFalse:function(){this._evaluateTest(!1===this.value==!this.isNot,"to be false")},toBeFalsy:function(){this._evaluateTest(!this.value==!this.isNot,"to be falsy")},toHaveBeenCalledWith:function(){let e=Array.prototype.slice.call(arguments);TestBench().$isSpy(this.value)?(this.name=this.value.getName(),this._evaluateTest(JSON.stringify(this.value.getStoredParams())===JSON.stringify(e)==!this.isNot,"to have been called with")):console.error("The specified value to check is not a TestBench.Spy!")},toHaveBeenCalled:function(){TestBench().$isSpy(this.value)?(this.name=this.value.getName(),this._evaluateTest(this.value.haveBeenCalledTimes()>0==!this.isNot,"to have been called")):console.error("The specified value to check is not a TestBench.Spy!")},toBe:function(e){this._evaluateTest(this.value===e==!this.isNot,this._toBeTextWithValue("to be",e))},toBeCloseTo:function(e,t){let n=Math.pow(10,t||2);this._evaluateTest(Math.round(this.value*n)/n==Math.round(e*n)/n==!this.isNot,this._toBeTextWithValue("to be close to",e))},toBeDefined:function(){this._evaluateTest(void 0!==this.value==!this.isNot,"to be defined")},toBeGreaterThan:function(e){this._evaluateTest(this.value>e==!this.isNot,this._toBeTextWithValue("to be greater than",e))},toBeGreaterThanOrEqual:function(e){this._evaluateTest(this.value>=e==!this.isNot,this._toBeTextWithValue("to be greater than or equal",e))},toBeLessThan:function(e){this._evaluateTest(this.value<e==!this.isNot,this._toBeTextWithValue("to be less than",e))},toBeLessThanOrEqual:function(e){this._evaluateTest(this.value<=e==!this.isNot,"to be less than or equal")},toBeNaN:function(){this._evaluateTest(isNaN(this.value)===!this.isNot,"to be NaN")},toBeNegativeInfinity:function(){this._evaluateTest(this.value===-1/0==!this.isNot,"to be negative Infinity")},toBePositiveInfinity:function(){this._evaluateTest(this.value===1/0==!this.isNot,"to be positive Infinity")},toContain:function(e){try{this._evaluateTest(this.value.indexOf(e)>=0==!this.isNot,this._toBeTextWithValue("to contain",e))}catch(t){this._evaluateTest(Object.keys(this.value).indexOf(e)>=0==!this.isNot,this._toBeTextWithValue("to contain",e))}},toHaveBeenCalledBefore:function(e){TestBench().$isSpy(this.value)&&TestBench().$isSpy(e)?(this.name=this.value.getName(),this._evaluateTest(this.value.firstCalled()<e.firstCalled()==!this.isNot,this._toBeTextWithValue("to have been called before",e))):console.error("The specified value / expected to check is not a TestBench.Spy!")},toHaveClass:function(e){this.value instanceof Element?this._evaluateTest(Array.prototype.slice.call(this.value.classList).indexOf(e)>=0==!this.isNot,this._toBeTextWithValue("to have class",e)):console.error("The specified value to check is not a DOM-Element")},toHaveSize:function(e){this._evaluateTest(Object.keys(this.value).length==e==!this.isNot,this._toBeTextWithValue("to have size",e))},toMatch:function(e){this._evaluateTest((e instanceof RegExp?e.test(this.value):this.value.indexOf(e)>=0)===!this.isNot,this._toBeTextWithValue("to match",e))},toThrow:function(e){e=e||null;try{this.value()}catch(t){this._evaluateTest((!e||t.name===e.name)==!this.isNot,this._toBeTextWithValue("to throw",e||""))}},toThrowError:function(e,t){e=e||null,t=t||null;try{this.value()}catch(n){this._evaluateTest((!e||this._compareError(n,e))===!this.isNot,this._toBeTextWithValue("to throw error",e||""))}},toThrowMatching:function(e){try{this.value()}catch(t){this._evaluateTest(e(t)===!this.isNot,this._toBeTextWithValue("to throw matching",e||""))}},_evaluateTest:function(e,t){if(e?this._testPassed(t):this._testFailed(t),this._setHtmlResultNumbers(),this.context){let n=["Context:",this.context].join(" ");consoleService.comment(n),htmlService.createHtmlElement("div",n,document.querySelector(".TestBench .container"),{class:"context"})}},_getExpectationText:function(e){return["Expect",this.name?this.name:this._valueInParenthesis(),this.isNot?"not":"",e].join(" ")},_valueInParenthesis:function(){return['"',this._getValueName(this.value)+'"'].join("")},_getValueName:function(e){return TestBench().$isSpy(e)?e.getName()?e.getName():e.name:"function"==typeof e?e.name:e},_toBeTextWithValue:function(e,t){return[e,['"',this._getValueName(t)+'"'].join("")].join(" ")},_testPassed:function(e){let t=[this._getExpectationText(e),"(passed)"].join(" ");consoleService.success(t),TestBench().printResult(t,ResultType.SUCCESS)},_testFailed:function(e){let t=[this._getExpectationText(e),"(failed)"].join(" ");consoleService.error(t),TestBench().printResult(t,ResultType.ERROR),testBench.failedExpectations+=1,document.querySelector(".header").style.backgroundColor="rgba(85, 15, 15, 0.8)"},_setHtmlResultNumbers:function(){document.querySelector("#success").innerHTML=testBench.runnedExpectations-testBench.failedExpectations,document.querySelector("#all").innerHTML=testBench.runnedExpectations},_compareError:function(e,t){return e.name===t.name&&e.message===t.message}}},Func=function(){return function(e,t){e=e||null,t=t||null;var n=0,i=null,s=void 0,o=null,a=null,r=[];function c(){let c=TestBench().$getBrowserTime()+1;for(;TestBench().$getBrowserTime()<c;);return n++,i||(i=c-1),t&&t.apply(null,arguments),e&&(a=e),o&&o.apply(null,arguments),r=Array.prototype.slice.call(arguments),s}return c.haveBeenCalledTimes=function(){return n},c.firstCalled=function(){return i},c.getName=function(){return a},c.getStoredParams=function(){return r},c.and={returnValue:function(e){return s=e,c},callFake:function(e){return o=e,c}},c}},TestBench=function(){return{componentName:null,runnedAssertions:0,failedExpectations:0,runnedAssertionName:"",runnedExpectations:0,runnedLocalExpectations:0,beforeEachAction:null,ArrayLikeMatchers:ArrayLikeMatchers,createSpy:Func(),$isSpy:function(e){return!!e&&!!e.haveBeenCalledTimes&&!!e.getName&&!!e.getStoredParams&&!!e.firstCalled&&"number"==typeof e.haveBeenCalledTimes()&&void 0!==e.getName()&&"object"==typeof e.getStoredParams()&&void 0!==e.firstCalled()},$getBrowserTime:function(){return this._supportsMicroseconds()?new Date().getTime():this._getMicroSeconds()},printResult:function(e,t){this._print("div",e,{class:["test-result",t+""].join(" ")})},_getMicroSeconds:function(){return 1e3*new Date().getTime()+1e3*performance.now()},_supportsMicroseconds:function(){return"object"==typeof performance&&"function"==typeof performance.now},_print:function(e,t,n){htmlService.createHtmlElement(e,t,document.querySelector(".TestBench .container"),n)}}},describe=function(e,t){(testBench=TestBench()).componentName=e,testBench.runnedExpectations=0,consoleService=ConsoleService(),htmlService=HtmlService(),document.querySelector(".TestBench")||htmlService.createHtmlElement("div","",document.body,{class:"TestBench"}),htmlService.createHtmlElement("div","",document.querySelector(".TestBench"),{class:"header"}),htmlService.createHtmlElement("div","",document.querySelector(".TestBench"),{class:"container"});let n=document.querySelector(".header");htmlService.createHtmlElement("h1",["Tests for:",e].join(" "),n),htmlService.createHtmlElement("h2",'<span id="success">0</span> / <span id="all">0</span> successful',n),consoleService.header(["Test:",e].join(" ")),t(),testBench.runnedAssertions<=0&&console.error("No assertions found!");let i=testBench.runnedExpectations-testBench.failedExpectations;consoleService.success([i,"/",testBench.runnedExpectations,"tests passed"].join(" "),!0),testBench.failedExpectations>0&&consoleService.error([testBench.failedExpectations,"/",testBench.runnedExpectations,"tests failed"].join(" "),!0)},beforeEach=function(e){testBench.beforeEachAction=e},it=function(e,t){void 0!==this.testBench?(testBench.runnedAssertions+=1,testBench.runnedAssertionName=e,testBench.runnedLocalExpectations=0,htmlService.createHtmlElement("h3",["Expectation:","It",e].join(" "),document.querySelector(".TestBench .container")),testBench.beforeEachAction&&testBench.beforeEachAction(),consoleService.bold(e),t(),testBench.runnedLocalExpectations<=0&&consoleService.error("No expectations for test case found!")):console.error("Tests have to run inside a describe function!")},expect=function(e){let t=testBench.ArrayLikeMatchers(e);return testBench.runnedExpectations+=1,testBench.runnedLocalExpectations+=1,t};function fakeAsync(e){return function(){let t=[],n=[],i=function(){for(;t.length>0;)t.shift()()},s=function(){for(;n.length>0;)n.shift()()},o=function(e){return function(){let n=function(){e(),i(),s()};t.push(n)}},a=tick;tick=function(e){e|=0,i(),s(),setTimeout(function(){},e)};let r=window.setTimeout;window.setTimeout=function(e,t){let o=function(){e(),i(),s()};n.push(o)},e(tick,o),window.setTimeout=r,tick=a}}var testBench,consoleService,htmlService,tick=function(e){e=e||null;let t=new Date().getTime();for(var n=t;n-t<e;)n=new Date().getTime()};